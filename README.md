# SKN13-3rd-2Team

# RAG 기반 신용카드 추천 시스템

## 프로젝트 목표
사용자의 니즈(예: "카페 할인", "신한카드", "연회비 만 원 이하")에 따라
맞춤형 신용카드를 추천해주는 대화형 **RAG 챗봇 시스템 구축**

| 항목                 | 설명                                                                                                                                       |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| **프로젝트 목적**    | 사용자 조건(예: "카페 할인", "신한카드")에 따라 **맞춤형 신용카드**를 추천하는 **대화형 RAG 기반 챗봇** 구축                               |
| **기존 서비스 한계** | **카드고릴라**: 여러 카드사는 포함되지만 **대화형 추천 기능 없음**<br>**각 카드사 사이트**: 대화형 챗봇이 있어도 **자사 카드만 추천** 가능 |
| 본 시스템의 차별점   | 자연어 기반 대화형 카드 추천<br>여러 카드사 카드 동시 비교 가능<br>사용자 조건 기반 필터링 + LLM 응답 생성                                 |

---

## 사용 데이터

**출처**
[카드고릴라](https://www.card-gorilla.com) — 카드사별 다양한 카드 정보와 혜택이 정리된 웹사이트

**수집 방법**
1. Selenium을 사용해 사이트 내 전체 카드 페이지를 크롤링
2. 카드 상세 페이지의 정보를 정제 후 JSON 형식으로 저장

## 메타데이터 구성 및 선정 이유

| 메타데이터 필드 | 설명                | 선정 이유                      |
| --------------- | ------------------- | ------------------------------ |
| 카드이름        | 카드의 이름         | 사용자 응답 출력에 필요        |
| 카드사          | 발급 카드사         | 사용자 입력 기반 필터링 가능   |
| 카드브랜드      | VISA, Mastercard 등 | 국제 브랜드 선호도 기반 필터링 |
| 국내연회비      | 원화 기준 연회비    | 가격 조건 필터링에 활용        |
| 해외연회비      | 해외 겸용 연회비    | 글로벌 사용 조건 필터링        |

## 사용 모델

| 역할                  | 모델명                            |
| --------------------- | --------------------------------- |
| **임베딩 모델**       | `text-embedding-3-small` (OpenAI) |
| **LLM (답변 생성기)** | `gpt-4.1-mini`                    |

## 시스템 구조 (RAG 체인)

```
[사용자 질문]
   ↓
[1] Query Embedding
   ↓
[2] 관련 카드 검색 (Chroma vector DB + metadata 필터)
   ↓
[3] Context + 질문을 LLM에 전달
   ↓
[4] 추천 카드 생성 및 응답 출력
```

**LangChain 기반 RAG 체인 구성**

```
rag_chain = (
    {"context": retriever, "question": RunnablePassthrough()}
    | prompt_template
    | llm
    | StrOutputParser()
)
```

- Retriever: Chroma DB에서 유사 카드 검색 + 필요시 metadata 필터 적용
- Prompt Template: 카드 정보 포맷에 맞춰 출력 유도
- LLM: context 기반으로 카드 추천 응답 생성
- OutputParser: LLM 응답 후 처리

## 프로젝트 구조 (임시)

```
card-rag-bot/
├── data/           # 크롤링 및 전처리된 카드 등의 데이터 저장
│   ├── raw/        # 원본 크롤링 JSON 파일 (예: 카드고릴라 크롤링 결과물)
│   └── processed/  # 문장화 및 임베딩용 정제 데이터
│
├── crawling/       # 카드 정보 수집용 크롤러 및 HTML 파서 코드
│
├── embedding/      # 문서 임베딩 생성 및 벡터 DB 저장 스크립트
│
├── RAG/            # LangGraph 기반 RAG 체인 정의 및 노드 구성
│
├── app/            # 챗봇 실행 로직 (추후 streamlit 등 사용 시)
```
